{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\seorin\\\\Desktop\\\\Mapdagu-Front\\\\src\\\\pages\\\\Result.js\",\n  _s = $RefreshSig$();\nimport \"../../styles/ResultViewer.css\";\nimport Graph from \"../Graph.js\";\nimport ResultViewer from \"../components/evaluate/ResultViewer\";\nimport { EvalDispatchContext, EvalStateContext } from \"../App\";\nimport { getResultContentByLevel } from \"../../util.js\";\nimport img_title from \"../../assets/title_result.png\";\nimport icon_rope from \"../../assets/test_rope.png\";\nimport { useContext, useEffect, useRef } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { getCookie } from \"../cookie\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TEST_URL = `https://mapdagu.site/api/test`;\nconst RESULT_URL = `https://mapdagu.site/api/test/info`;\nconst Result = ({\n  maxTestNum,\n  role\n}) => {\n  _s();\n  const accessToken = getCookie(\"accessToken\");\n  const data = useContext(EvalStateContext);\n  const {\n    onDelete,\n    onSubmit\n  } = useContext(EvalDispatchContext);\n  //임시 데이터\n  const scoville = 3000;\n  const level = 2;\n  const dtoList = data.map(item => {\n    return {\n      name: item.itemName[0],\n      score: item.selectionId\n    };\n  });\n  useEffect(() => {\n    if (role === \"NOT_TEST_USER\") {\n      try {\n        axios.post(TEST_URL, {\n          dtoList\n        }, {\n          headers: {\n            Authorization: accessToken\n          }\n        });\n        onSubmit();\n      } catch (error) {\n        alert(error.response.data.message);\n      }\n    } else {\n      try {\n        axios.patch(TEST_URL, {\n          dtoList\n        }, {\n          headers: {\n            Authorization: accessToken\n          }\n        });\n      } catch (error) {\n        alert(error.response.data.message);\n      }\n    }\n    try {\n      axios.patch(RESULT_URL, {\n        scoville,\n        level\n      }, {\n        headers: {\n          Authorization: accessToken\n        }\n      });\n    } catch (error) {\n      alert(error.response.data.message);\n    }\n    for (let i = 0; i < maxTestNum + 1; i++) {\n      onDelete(1, \"\", i);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: /*#__PURE__*/_jsxDEV(ResultViewer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 9\n  }, this);\n};\n_s(Result, \"cEkf+6Atv77VH6WV3c+apAZvYLE=\");\n_c = Result;\nexport default Result;\nvar _c;\n$RefreshReg$(_c, \"Result\");","map":{"version":3,"names":["Graph","ResultViewer","EvalDispatchContext","EvalStateContext","getResultContentByLevel","img_title","icon_rope","useContext","useEffect","useRef","useNavigate","getCookie","axios","jsxDEV","_jsxDEV","TEST_URL","RESULT_URL","Result","maxTestNum","role","_s","accessToken","data","onDelete","onSubmit","scoville","level","dtoList","map","item","name","itemName","score","selectionId","post","headers","Authorization","error","alert","response","message","patch","i","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/seorin/Desktop/Mapdagu-Front/src/pages/Result.js"],"sourcesContent":["import \"../../styles/ResultViewer.css\";\r\nimport Graph from \"../Graph.js\"\r\nimport ResultViewer from \"../components/evaluate/ResultViewer\";\r\nimport { EvalDispatchContext, EvalStateContext } from \"../App\";\r\nimport { getResultContentByLevel } from \"../../util.js\";\r\n\r\nimport img_title from \"../../assets/title_result.png\";\r\nimport icon_rope from \"../../assets/test_rope.png\";\r\n\r\nimport { useContext, useEffect, useRef } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { getCookie } from \"../cookie\";\r\nimport axios from \"axios\";\r\n\r\nconst TEST_URL = `https://mapdagu.site/api/test`;\r\nconst RESULT_URL = `https://mapdagu.site/api/test/info`;\r\n\r\nconst Result = ({maxTestNum, role}) => {\r\n    const accessToken = getCookie(\"accessToken\");\r\n    const data = useContext(EvalStateContext);\r\n    const { onDelete, onSubmit } = useContext(EvalDispatchContext);\r\n    //임시 데이터\r\n    const scoville = 3000; \r\n    const level = 2;\r\n\r\n    const dtoList = data.map(item => {\r\n        return {\r\n          name: item.itemName[0],\r\n          score: item.selectionId,\r\n        };\r\n      });\r\n\r\n    useEffect(() => {\r\n          if(role === \"NOT_TEST_USER\"){\r\n            try{\r\n                axios.post(TEST_URL, {dtoList}, {headers: {Authorization: accessToken}});\r\n                onSubmit();\r\n              } catch (error) {\r\n                alert(error.response.data.message);\r\n            }\r\n          } else{   \r\n              try{\r\n                axios.patch(TEST_URL, {dtoList}, {headers: {Authorization: accessToken}});\r\n              } catch (error) {\r\n                alert(error.response.data.message);\r\n            }\r\n          }\r\n          try{\r\n              axios.patch(RESULT_URL, {scoville, level}, {headers: {Authorization: accessToken}});\r\n          } catch (error) {\r\n              alert(error.response.data.message);\r\n          }\r\n          \r\n        for(let i=0; i<maxTestNum+1; i++){\r\n          onDelete(1, \"\", i);\r\n        }\r\n    }, []);\r\n    \r\n    return(\r\n        <div className=\"container\">\r\n            <div className=\"content\">\r\n                <ResultViewer />                \r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Result;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}