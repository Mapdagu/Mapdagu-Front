{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\seorin\\\\Desktop\\\\Mapdagu-Front\\\\src\\\\pages\\\\Result.js\",\n  _s = $RefreshSig$();\nimport { useContext, useEffect } from \"react\";\nimport ResultViewer from \"../components/ResultViewer\";\nimport { EvalDispatchContext, EvalStateContext } from \"../App\";\nimport axios from \"axios\";\nimport { getCookie } from \"../cookie\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TEST_URL = `https://mapdagu.site/api/test`;\nconst RESULT_URL = `https://mapdagu.site/api/test/info`;\nconst Result = ({\n  maxTestNum,\n  role\n}) => {\n  _s();\n  const accessToken = getCookie(\"accessToken\");\n  const data = useContext(EvalStateContext);\n  const {\n    onDelete,\n    onSubmit\n  } = useContext(EvalDispatchContext);\n  //임시 데이터\n  const scoville = 3000;\n  const level = 2;\n  const dtoList = data.map(item => {\n    return {\n      name: item.itemName[0],\n      score: item.selectionId\n    };\n  });\n  useEffect(() => {\n    if (role === \"NOT_TEST_USER\") {\n      try {\n        axios.post(TEST_URL, {\n          dtoList\n        }, {\n          headers: {\n            Authorization: accessToken\n          }\n        });\n        onSubmit();\n      } catch (error) {\n        alert(error.response.data.message);\n      }\n    } else {\n      try {\n        axios.patch(TEST_URL, {\n          dtoList\n        }, {\n          headers: {\n            Authorization: accessToken\n          }\n        });\n      } catch (error) {\n        alert(error.response.data.message);\n      }\n    }\n    try {\n      axios.patch(RESULT_URL, {\n        scoville,\n        level\n      }, {\n        headers: {\n          Authorization: accessToken\n        }\n      });\n    } catch (error) {\n      alert(error.response.data.message);\n    }\n    for (let i = 0; i < maxTestNum + 1; i++) {\n      onDelete(i);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: /*#__PURE__*/_jsxDEV(ResultViewer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 9\n  }, this);\n};\n_s(Result, \"cEkf+6Atv77VH6WV3c+apAZvYLE=\");\n_c = Result;\nexport default Result;\nvar _c;\n$RefreshReg$(_c, \"Result\");","map":{"version":3,"names":["useContext","useEffect","ResultViewer","EvalDispatchContext","EvalStateContext","axios","getCookie","jsxDEV","_jsxDEV","TEST_URL","RESULT_URL","Result","maxTestNum","role","_s","accessToken","data","onDelete","onSubmit","scoville","level","dtoList","map","item","name","itemName","score","selectionId","post","headers","Authorization","error","alert","response","message","patch","i","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/seorin/Desktop/Mapdagu-Front/src/pages/Result.js"],"sourcesContent":["import { useContext, useEffect } from \"react\";\r\nimport ResultViewer from \"../components/ResultViewer\";\r\nimport { EvalDispatchContext, EvalStateContext } from \"../App\";\r\nimport axios from \"axios\";\r\nimport { getCookie } from \"../cookie\";\r\n\r\nconst TEST_URL = `https://mapdagu.site/api/test`;\r\nconst RESULT_URL = `https://mapdagu.site/api/test/info`;\r\n\r\nconst Result = ({maxTestNum, role}) => {\r\n    const accessToken = getCookie(\"accessToken\");\r\n    const data = useContext(EvalStateContext);\r\n    const { onDelete, onSubmit } = useContext(EvalDispatchContext);\r\n    //임시 데이터\r\n    const scoville = 3000; \r\n    const level = 2;\r\n\r\n    const dtoList = data.map(item => {\r\n        return {\r\n          name: item.itemName[0],\r\n          score: item.selectionId,\r\n        };\r\n      });\r\n\r\n    useEffect(() => {\r\n          if(role === \"NOT_TEST_USER\"){\r\n            try{\r\n                axios.post(TEST_URL, {dtoList}, {headers: {Authorization: accessToken}});\r\n                onSubmit();\r\n              } catch (error) {\r\n                alert(error.response.data.message);\r\n            }\r\n          } else{   \r\n              try{\r\n                axios.patch(TEST_URL, {dtoList}, {headers: {Authorization: accessToken}});\r\n              } catch (error) {\r\n                alert(error.response.data.message);\r\n            }\r\n          }\r\n          try{\r\n              axios.patch(RESULT_URL, {scoville, level}, {headers: {Authorization: accessToken}});\r\n          } catch (error) {\r\n              alert(error.response.data.message);\r\n          }\r\n          \r\n        for(let i=0; i<maxTestNum+1; i++){\r\n          onDelete(i);\r\n        }\r\n    }, []);\r\n    \r\n    return(\r\n        <div className=\"container\">\r\n            <div className=\"content\">\r\n                <ResultViewer />                \r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Result;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}